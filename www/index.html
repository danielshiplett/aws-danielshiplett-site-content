<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Cloud Resume</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./css/style.css" />
    </head>

    <body>
        <p>Page Views: <span id="cntr"></span></p>
        <h1>Daniel Shiplett's Cloud Resume</h1>
        <h2>What Is This?</h2>
        <p>The future site of my cloud resume as dictated by <a href="https://cloudresumechallenge.dev/">The Cloud Resume Challenge</a>.</p>
    </body>

    <script> 
        var counter = document.getElementById("cntr");
        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function () {
            if (this.readyState != 4) return;

            if (this.status == 200) {
                var data = JSON.parse(this.responseText);
                counter.innerHTML = data.count;
            }
        };

        xhr.open("POST", "https://hfij7kp2dc.execute-api.us-east-1.amazonaws.com/site/api/pagecounter", true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({
            page: "index.html"
        }));

    </script>
</html>